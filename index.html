<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema Completo de Facturación Electrónica</title>
  <!-- OCR con Tesseract.js -->
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@2.1.5/dist/tesseract.min.js"></script>
  <!-- Librería para firma digital JWS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jsrsasign/10.5.24/jsrsasign-all-min.js"></script>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/index.css">
</head>
<body>
  <header>
    <h1>Sistema Completo de Facturación Electrónica</h1>
  </header>
  <main>
    <!-- Sección 1: OCR -->
    <section class="section">
      <h2>1. Captura de Factura y Extracción OCR</h2>
      <div class="form-group">
        <input type="file" id="imageInput" accept="image/*">
        <button id="ocrBtn">Ejecutar OCR</button>
      </div>
      <h3>Texto Extraído:</h3>
      <pre id="ocrText"></pre>
    </section>
    <!-- Sección 2: Formulario -->
    <section class="section">
      <h2>2. Ingreso y Verificación de Datos</h2>
      <form id="dteForm">
        <!-- Datos de la Factura -->
        <fieldset>
          <legend>Datos de la Factura</legend>
          <div class="input-group">
            <label for="facturaNumero">Número de Factura:</label>
            <input type="text" id="facturaNumero" placeholder="Ej. 12345">
          </div>
          <div class="input-group">
            <label for="facturaFecha">Fecha (dd/mm/aaaa):</label>
            <input type="text" id="facturaFecha" placeholder="Ej. 20/10/2022">
          </div>
          <div class="input-group">
            <label for="facturaNIT">NIT Factura:</label>
            <input type="text" id="facturaNIT" placeholder="Ej. 0614-290350-101-3">
          </div>
          <div class="input-group">
            <label for="facturaTotal">Total:</label>
            <input type="text" id="facturaTotal" placeholder="Ej. 1234.56">
          </div>
        </fieldset>
        <!-- Datos del Emisor -->
        <fieldset>
          <legend>Datos del Emisor</legend>
          <div class="input-group">
            <label for="emisorNIT">NIT:</label>
            <input type="text" id="emisorNIT" placeholder="Ej. 0614-290350-101-3">
          </div>
          <div class="input-group">
            <label for="emisorNRC">NRC:</label>
            <input type="text" id="emisorNRC" placeholder="NRC">
          </div>
          <div class="input-group">
            <label for="emisorNombre">Nombre:</label>
            <input type="text" id="emisorNombre" placeholder="Nombre del Emisor">
          </div>
          <div class="input-group">
            <label for="emisorCodActividad">Código de Actividad:</label>
            <input type="text" id="emisorCodActividad" value="62020">
          </div>
          <div class="input-group">
            <label for="emisorDescActividad">Descripción de Actividad:</label>
            <input type="text" id="emisorDescActividad" value="Actividad Comercial">
          </div>
          <div class="input-group">
            <label for="emisorNombreComercial">Nombre Comercial:</label>
            <input type="text" id="emisorNombreComercial" placeholder="Nombre Comercial">
          </div>
          <div class="input-group">
            <label for="emisorTipoEstablecimiento">Tipo de Establecimiento:</label>
            <input type="text" id="emisorTipoEstablecimiento" value="02">
          </div>
          <div class="input-group">
            <label>Dirección (Departamento, Municipio, Complemento):</label>
            <input type="text" id="emisorDepartamento" placeholder="Departamento">
            <input type="text" id="emisorMunicipio" placeholder="Municipio">
            <input type="text" id="emisorComplemento" placeholder="Complemento">
          </div>
          <div class="input-group">
            <label for="emisorTelefono">Teléfono:</label>
            <input type="text" id="emisorTelefono" placeholder="Teléfono">
          </div>
          <div class="input-group">
            <label for="emisorCorreo">Correo:</label>
            <input type="email" id="emisorCorreo" placeholder="Correo electrónico">
          </div>
          <div class="input-group">
            <label for="emisorCodEstableMH">Código Estable MH:</label>
            <input type="text" id="emisorCodEstableMH" value="4577">
          </div>
          <div class="input-group">
            <label for="emisorCodPuntoVentaMH">Código Punto Venta MH:</label>
            <input type="text" id="emisorCodPuntoVentaMH" value="4578">
          </div>
        </fieldset>
        <!-- Datos del Receptor -->
        <fieldset>
          <legend>Datos del Receptor</legend>
          <div class="input-group">
            <label for="receptorNRC">NRC:</label>
            <input type="text" id="receptorNRC" placeholder="NRC">
          </div>
          <div class="input-group">
            <label for="receptorNombre">Nombre:</label>
            <input type="text" id="receptorNombre" placeholder="Nombre del Receptor">
          </div>
          <div class="input-group">
            <label for="receptorCodActividad">Código de Actividad:</label>
            <input type="text" id="receptorCodActividad" value="00000">
          </div>
          <div class="input-group">
            <label for="receptorDescActividad">Descripción de Actividad:</label>
            <input type="text" id="receptorDescActividad" placeholder="Actividad del Receptor">
          </div>
          <div class="input-group">
            <label>Dirección (Departamento, Municipio, Complemento):</label>
            <input type="text" id="receptorDepartamento" placeholder="Departamento">
            <input type="text" id="receptorMunicipio" placeholder="Municipio">
            <input type="text" id="receptorComplemento" placeholder="Complemento">
          </div>
          <div class="input-group">
            <label for="receptorTelefono">Teléfono:</label>
            <input type="text" id="receptorTelefono" placeholder="Teléfono">
          </div>
          <div class="input-group">
            <label for="receptorCorreo">Correo:</label>
            <input type="email" id="receptorCorreo" placeholder="Correo electrónico">
          </div>
          <div class="input-group">
            <label for="receptorNombreComercial">Nombre Comercial:</label>
            <input type="text" id="receptorNombreComercial" placeholder="Nombre Comercial">
          </div>
          <div class="input-group">
            <label for="receptorNIT">NIT Receptor:</label>
            <input type="text" id="receptorNIT" placeholder="NIT del Receptor">
          </div>
        </fieldset>
        <!-- Datos del Ítem -->
        <fieldset>
          <legend>Datos del Ítem</legend>
          <div class="input-group">
            <label for="itemDescripcion">Descripción del Ítem:</label>
            <input type="text" id="itemDescripcion" placeholder="Descripción del producto/servicio">
          </div>
          <div class="input-group">
            <label for="itemCantidad">Cantidad:</label>
            <input type="text" id="itemCantidad" value="1">
          </div>
          <div class="input-group">
            <label for="itemPrecioUni">Precio Unitario:</label>
            <input type="text" id="itemPrecioUni" placeholder="Precio unitario">
          </div>
          <div class="input-group">
            <label for="itemDescuento">Descuento:</label>
            <input type="text" id="itemDescuento" value="0.00">
          </div>
        </fieldset>
        <div class="button-group">
          <button type="button" id="generarDteBtn">Generar DTE Completo</button>
        </div>
      </form>
    </section>
    <!-- Sección 3: JSON Output -->
    <section class="section">
      <h2>3. DTE JSON con Firma Digital</h2>
      <pre id="dteJsonOutput"></pre>
    </section>
  </main>
  <script src="js/index.js"></script>
</body>
</html>